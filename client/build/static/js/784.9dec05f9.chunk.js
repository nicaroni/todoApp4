"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[784],{784:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var s=o(43),a=o(213),l=o(579);const d=e=>{let{todo:t,dispatch:o}=e;const[d,c]=(0,s.useState)(!1),[r,n]=(0,s.useState)(t.description);return(0,l.jsxs)("tr",{className:"todo-item-row "+(t.completed?"completed":""),children:[(0,l.jsx)("td",{className:"circle",onClick:()=>{const e={...t,completed:!t.completed};o({type:"TOGGLE_TODO_COMPLETED",payload:e})},children:t.completed?"\u2713":""}),(0,l.jsx)("td",{className:"todo-date",children:(i=t.created_at,new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,l.jsx)("td",{className:"todo-description",children:d?(0,l.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(o({type:"UPDATE_TODO",payload:{...t,description:r}}),c(!1))},className:"form-control"}):(0,l.jsx)("span",{onClick:()=>c(!0),children:t.description})}),(0,l.jsx)("td",{className:"delete-btn-cell",children:(0,l.jsx)("button",{className:"delete-btn",onClick:async()=>{const e=localStorage.getItem("authToken");if(e)try{await a.A.delete(`http://localhost:5000/todos/${t.todo_id}`,{headers:{Authorization:`Bearer ${e}`}}),o({type:"DELETE_TODO",payload:t.todo_id})}catch(s){console.error("Error deleting todo:",s)}else console.error("No token found, please log in.")},children:"Delete"})})]});var i},c=e=>{let{dispatch:t}=e;const[o,d]=(0,s.useState)("");return(0,l.jsx)("form",{onSubmit:async e=>{e.preventDefault();const s=localStorage.getItem("authToken");if(s)try{const e=await a.A.post("http://localhost:5000/todos",{description:o},{headers:{Authorization:`Bearer ${s}`}});t({type:"ADD_TODO",payload:e.data}),d("")}catch(l){console.error("Error adding todo:",l)}else console.error("No token found, please log in.")},className:"todo-form",children:(0,l.jsxs)("div",{className:"table-like-row",children:[(0,l.jsx)("div",{className:"circle add-circle",children:"+"}),(0,l.jsx)("input",{type:"text",className:"form-control todo-input",placeholder:"Add a new todo...",value:o,onChange:e=>d(e.target.value)}),(0,l.jsx)("button",{className:"btn btn-primary add-todo-btn",type:"submit",children:"Add"})]})})},r=e=>{let{todos:t,dispatch:o}=e;const[a,r]=(0,s.useState)(!1),n=t.filter((e=>!e.completed)),i=t.filter((e=>e.completed));return(0,l.jsxs)("div",{className:"todo-list",children:[(0,l.jsxs)("table",{className:"table table-borderless main-todo-table",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{className:"todo-header",children:"Description"})})}),(0,l.jsxs)("tbody",{children:[n.map((e=>(0,l.jsx)(d,{todo:e,dispatch:o},e.todo_id))),(0,l.jsx)("tr",{className:"todo-form-row",children:(0,l.jsx)("td",{className:"td-input",colSpan:"2",children:(0,l.jsx)(c,{dispatch:o})})})]})]}),(0,l.jsx)("button",{onClick:()=>{r((e=>!e))},className:"btn btn-secondary m-3",children:a?"Hide Completed Tasks":"Show Completed Tasks"}),a&&i.length>0&&(0,l.jsxs)("div",{className:"completed-todos",children:[(0,l.jsx)("h3",{children:"Completed Tasks"}),(0,l.jsx)("table",{className:"table table-dark table-striped",children:(0,l.jsx)("tbody",{className:"completed-table-body",children:i.map((e=>(0,l.jsx)(d,{todo:e,dispatch:o},e.todo_id)))})})]})]})}}}]);
//# sourceMappingURL=784.9dec05f9.chunk.js.map